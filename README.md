# gopermission
基于 自己遇到场景抽象的 角色权限 判定组件，支持绑定模型，进行更进一步判定

## 说明
目前是仅仅做到满足自己的需求

数据库仅支持 `gorm` 和 `mysql`
数据验证用的的 `validator`
路由匹配的方案采用 `fiber` 的

这个库只考虑权限判定相关的东西，用户跟角色权限的绑定，交给使用方来自己决定

目前计划支持多个条件情况下有一个条件允许就可以访问

条件解析用 `antlr` 实现，具体请看 `Condition.g4` 文件
条件的设定条件 `model` 指代关联模型，`user` 代表登录用户
条件可以写成 `model.category.id in user.categories || model.uid == user.id`

条件支持：
* ==
* !=
* &gt;
* &gt;=
* &lt;
* &lt;=
* in
* ||
* &&
* ()

## 注意
1. 权限相关的绑定肯定是在开发期间做的，所以一定要做好充分测试。
2. 这边只负责传入的数据是否正确，所以，如果获取数据时候获取不到，返回结果肯定是 `false` 的
3. 书写条件的时候一定要善用括号，否则，大家看不懂，程序判断错误跟你预期不一致也是谁都不想看到的


## 图示
![图示](./flow_chart.png)

